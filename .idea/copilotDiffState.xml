<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/README_NEW.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/README_NEW.md" />
              <option name="updatedContent" value="#  Background Music Player&#10;&#10;A professional Android music player application with background playback support, built using modern Android development practices and Media3 ExoPlayer.&#10;&#10;## ✨ Features&#10;&#10;### Core Functionality&#10;- **Background Playback** - Continue listening to music even when the app is minimized or the screen is off&#10;- **Foreground Service** - Persistent music playback with notification controls&#10;- **Media Controls** - Play, Pause, Stop, Previous, Next track controls&#10;- **Loop Mode** - Cycle through loop options: OFF → Loop 1x → Loop 2x&#10;- **Seek Control** - Interactive seek bar for precise playback position control&#10;- **Playlist Support** - Play through a queue of multiple tracks&#10;&#10;### User Experience&#10;- **Material Design UI** - Clean, modern interface with Material Components&#10;- **Notification Controls** - Control playback directly from the notification shade&#10;- **Real-time Updates** - Live playback position and duration updates&#10;- **Track Information** - Display track name, artist, and playback status&#10;- **Permission Handling** - Smart runtime permission requests for audio access&#10;&#10;### Technical Features&#10;- **Media3 ExoPlayer** - Industry-standard media playback engine&#10;- **MVVM Architecture** - Separation of concerns with ViewModel pattern&#10;- **Kotlin Coroutines** - Asynchronous programming with StateFlow&#10;- **Service Binding** - Efficient communication between Activity and Service&#10;- **FLAC Support** - High-quality lossless audio playback&#10;&#10;## ️ Architecture&#10;&#10;### Project Structure&#10;```&#10;app/&#10;├── src/main/&#10;│   ├── java/com/example/backgroundmusicplayer/&#10;│   │   ├── MainActivity.kt              # Main UI controller&#10;│   │   ├── MainViewModel.kt             # UI state management&#10;│   │   ├── model/&#10;│   │   │   └── PlaybackState.kt         # Playback state definitions&#10;│   │   └── service/&#10;│   │       ├── MusicPlayerService.kt    # Background playback service&#10;│   │       └── MusicNotificationManager.kt  # Notification controls&#10;│   ├── res/&#10;│   │   ├── layout/                      # UI layouts&#10;│   │   ├── raw/                         # Audio files (FLAC)&#10;│   │   └── values/                      # Resources&#10;│   └── AndroidManifest.xml&#10;└── build.gradle.kts&#10;```&#10;&#10;### Components&#10;&#10;#### MainActivity&#10;- Handles UI interactions and displays track list&#10;- Binds to `MusicPlayerService` for playback control&#10;- Manages runtime permissions (READ_MEDIA_AUDIO, POST_NOTIFICATIONS)&#10;- Observes playback state and updates UI accordingly&#10;- Lifecycle-aware: properly binds/unbinds service&#10;&#10;#### MainViewModel&#10;- Manages track list and selected track state&#10;- Provides UI state using Kotlin StateFlow&#10;- Survives configuration changes (screen rotation)&#10;&#10;#### MusicPlayerService&#10;- Foreground service for background playback&#10;- Implements ExoPlayer for media playback&#10;- Manages playlist and track navigation&#10;- Handles playback events and state updates&#10;- Supports loop modes (1x, 2x)&#10;&#10;#### MusicNotificationManager&#10;- Creates and manages media-style notifications&#10;- Provides notification controls (play, pause, next, previous)&#10;- Updates notification with current track information&#10;&#10;#### PlaybackState&#10;Sealed class hierarchy representing different playback states:&#10;- `Playing` - Active playback with position/duration&#10;- `Paused` - Playback paused at position&#10;- `Stopped` - No active playback&#10;- `Preparing` - Loading/buffering track&#10;&#10;## ️ Technical Stack&#10;&#10;### Dependencies&#10;- **AndroidX Core** - Modern Android development libraries&#10;- **Material Components** - Material Design UI components&#10;- **Media3 ExoPlayer 1.2.1** - Advanced media playback&#10;  - media3-exoplayer&#10;  - media3-ui&#10;  - media3-session&#10;  - media3-common&#10;  - media3-decoder&#10;  - media3-extractor&#10;- **Kotlin Coroutines** - Asynchronous programming&#10;- **ViewBinding** - Type-safe view access&#10;&#10;### Requirements&#10;- **Minimum SDK**: API 24 (Android 7.0)&#10;- **Target SDK**: API 34 (Android 14)&#10;- **Compile SDK**: API 34&#10;- **Kotlin**: 1.9.0&#10;- **Gradle**: 8.1.1&#10;&#10;##  Getting Started&#10;&#10;### Prerequisites&#10;- Android Studio Hedgehog (2023.1.1) or later&#10;- JDK 17 or later&#10;- Android SDK with API 34&#10;&#10;### Installation&#10;&#10;1. **Clone the repository**&#10;   ```bash&#10;   git clone &lt;repository-url&gt;&#10;   cd Background-player&#10;   ```&#10;&#10;2. **Open in Android Studio**&#10;   - Launch Android Studio&#10;   - Select &quot;Open an Existing Project&quot;&#10;   - Navigate to the project directory&#10;&#10;3. **Sync Gradle**&#10;   - Wait for Gradle sync to complete&#10;   - Ensure all dependencies are downloaded&#10;&#10;4. **Build and Run**&#10;   - Connect an Android device or start an emulator&#10;   - Click &quot;Run&quot; (Shift+F10) to build and install&#10;&#10;### Build Scripts&#10;&#10;The project includes convenient build scripts for Windows:&#10;&#10;- **`build_project.bat`** - Build the APK&#10;- **`build_and_install.bat`** - Build and install to connected device&#10;- **`reinstall.bat`** - Reinstall the app&#10;&#10;##  Permissions&#10;&#10;The app requests the following permissions:&#10;&#10;### Android 13+ (API 33+)&#10;- `READ_MEDIA_AUDIO` - Access audio files&#10;- `POST_NOTIFICATIONS` - Show playback notifications&#10;- `FOREGROUND_SERVICE` - Background playback&#10;- `FOREGROUND_SERVICE_MEDIA_PLAYBACK` - Media playback service&#10;&#10;### Android 6.0 - 12 (API 23-32)&#10;- `READ_EXTERNAL_STORAGE` - Access audio files&#10;- `FOREGROUND_SERVICE` - Background playback&#10;&#10;##  Usage&#10;&#10;### Playing Music&#10;1. Launch the app&#10;2. Grant required permissions when prompted&#10;3. Tap on any track from the list to start playback&#10;4. The music will continue playing in the background&#10;&#10;### Playback Controls&#10;- **Play/Pause** - Control playback state&#10;- **Previous/Next** - Navigate through playlist&#10;- **Stop** - Stop playback and clear notification&#10;- **Loop** - Cycle through loop modes (OFF/1x/2x)&#10;- **Seek Bar** - Drag to change playback position&#10;&#10;### Notification Controls&#10;When music is playing, a persistent notification appears with:&#10;- Current track information&#10;- Play/Pause button&#10;- Previous/Next track buttons&#10;- Tap to return to the app&#10;&#10;##  Configuration&#10;&#10;### Adding Custom Tracks&#10;Place your audio files (FLAC format) in `app/src/main/res/raw/` directory. The app automatically discovers and lists all audio files.&#10;&#10;### Supported Audio Formats&#10;- FLAC (Free Lossless Audio Codec) - Primary support&#10;- MP3, M4A, WAV - Supported through ExoPlayer&#10;&#10;##  Code Highlights&#10;&#10;### Service Lifecycle&#10;The app properly manages service lifecycle:&#10;- Service starts when user plays a track&#10;- Service becomes foreground with notification&#10;- Service continues playing when app is backgrounded&#10;- Service stops when user clicks Stop or clears notification&#10;&#10;### State Management&#10;Uses modern Kotlin Flow for reactive state updates:&#10;```kotlin&#10;// Service emits playback state&#10;val playbackState = MutableStateFlow&lt;PlaybackState&gt;(PlaybackState.Stopped)&#10;&#10;// Activity observes and updates UI&#10;musicService?.playbackState?.collect { state -&gt;&#10;    updateUI(state)&#10;}&#10;```&#10;&#10;### Permission Handling&#10;Smart permission requests based on Android version:&#10;- Android 13+: Requests `READ_MEDIA_AUDIO` and `POST_NOTIFICATIONS`&#10;- Android 6-12: Requests `READ_EXTERNAL_STORAGE`&#10;&#10;##  Troubleshooting&#10;&#10;### Music doesn't play&#10;- Ensure audio files are in `res/raw/` directory&#10;- Check that permissions are granted&#10;- Verify audio file format is supported&#10;&#10;### Notification doesn't show&#10;- Grant `POST_NOTIFICATIONS` permission (Android 13+)&#10;- Check that service is running in foreground&#10;&#10;### App crashes on startup&#10;- Check logcat for error messages&#10;- Verify all dependencies are properly installed&#10;- Ensure target device meets minimum SDK requirements&#10;&#10;##  License&#10;&#10;This project is licensed under the MIT License - see the LICENSE file for details.&#10;&#10;##  Contributing&#10;&#10;Contributions are welcome! Please feel free to submit a Pull Request.&#10;&#10;### Development Guidelines&#10;- Follow Kotlin coding conventions&#10;- Use Material Design principles&#10;- Add comments for complex logic&#10;- Test on multiple Android versions&#10;- Handle edge cases gracefully&#10;&#10;##  Contact&#10;&#10;For questions or support, please open an issue in the repository.&#10;&#10;---&#10;&#10;**Built with ❤️ using Kotlin and Android Jetpack**&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>